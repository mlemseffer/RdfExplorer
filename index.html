<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RdfExplorer</title>
    <link rel="icon" type="image/png" href="favicon.ico">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <h1>üï∏Ô∏è RdfExplorer</h1>
            <div class="header-actions">
                <button class="btn btn-primary" id="toggleSimulationBtn">‚è∏Ô∏è Pause Simulation</button>
                <button class="btn btn-primary" id="importConfigBtn">üìÅ Importer Configuration (JSON)</button>
                <input type="file" id="configInput" accept=".json" style="display: none;">
                <button class="btn btn-primary" id="importRDFBtn">üìÅ Importer RDF</button>
                <input type="file" id="fileInput" accept=".ttl" style="display: none;">
                <button class="btn btn-primary" id="exportRDFConfigBtn">üì§ Exporter (RDF+Config)</button>
                <button class="btn btn-primary" id="exportSVGBtn">üì§ Exporter SVG</button>
            </div>
        </header>

        <!-- Sidebar - Contr√¥les -->
        <aside class="sidebar">
            <!-- Filtres d'affichage -->
            <div class="panel">
                <div class="panel-header">üîç Filtres d'affichage</div>
                <div class="panel-content">
                    <div class="form-group">
                        <label>Degr√© minimum : <span id="minDegreeValue">0</span></label>
                        <input type="range" id="degreeRangeInput" class="range-input" min="0" max="10" value="1">
                        <div class="range-labels" id="degreeRangeLabels">
                            <span>0</span>
                            <span>TODO</span>
                            <span>TODO</span>
                        </div>
                    </div>

                    <div class="form-group"> <!--//TODO : Extraire les rdf:type-->
                        <label>Types RDF des noeuds</label>
                        <div class="checkbox-group" id="rdfTypesCheckboxes"></div>
                    </div>
                </div>
            </div>

            <div class="panel">
                <div class="panel-header">‚û°Ô∏è‚Äã Label des noeuds</div> 
                <div class="panel-content">
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="showNodeLabels">
                            <label for="showNodeLabels">Afficher le nom des noeuds</label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Pr√©dicats -->
            <div class="panel" id="predicate-panel">
                <div class="panel-header">üîó Pr√©dicats actifs</div> <!-- //TODO : Extraire les pr√©dicats-->
                <div class="panel-content" id="predicatePanelContent">
                    <div class="checkbox-group" id="predicateCheckboxes">
                        <input type="checkbox" id="hideIsolatedNodes">
                        <label for="hideIsolatedNodes">Masquer les n≈ìuds isol√©s</label>
                    </div>
                </div>
            </div>

            <div class="panel">
                <div class="panel-header">‚û°Ô∏è‚Äã Label des ar√™tes</div> 
                <div class="panel-content">
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="showEdgeLabels">
                            <label for="showEdgeLabels">Afficher le nom des ar√™tes</label>
                        </div>

                    </div>
                </div>
            </div>


            <!-- Exploration -->
            <div class="panel">
                <div class="panel-header">üß≠ Exploration</div>

                <br/>
                <div class="form-group">
                    <label>Exploration par ar√™tes</label>
                    <select class="form-control" id="edgeDirectionSelect">
                        <option>Entrantes + Sortantes</option>
                        <option>Entrantes</option>
                        <option>Sortantes</option>
                    </select>                        
                </div>


                <div class="panel-content">
                    <div class="form-group">
                        <label>N≈ìud de d√©part</label>
                        <input type="text" class="form-control" placeholder="ex: dbr:Paris" id="startNodeInput">
                    </div>

                    <button class="btn btn-secondary" id="startNodeBtn">üî∞ S√©lectionner d√©part</button>

                    <div class="form-group">
                        <label>Profondeur Max : <span id="depthValue">1</span></label>
                        <input type="range" class="range-input" id="depthRange">
                        <div class="range-labels" id="depthRangeLabels">
                            <span>1</span>
                            <span>TODO</span>
                            <span>TODO</span>
                        </div>
                    </div>
                

                    <button class="btn btn-secondary" id="depthExploreBtn">üéØ Explorer en profondeur</button>
                    <button class="btn btn-secondary" id="SubGraphBtn">üï∏Ô∏è‚Äã Afficher le sous graphe</button>

                    <div class="form-group" style="margin-top: 15px;">
                        <label>Recherche de chemin</label>
                        <input type="text" class="form-control" placeholder="N≈ìud d'arriv√©e" id="endNodeInput">
                            <button class="btn btn-secondary" id="endNodeBtn">üõë S√©lectionner arriv√©e</button>
                        <button class="btn btn-secondary" id="shortestPathBtn">‚ö° Chemin le plus court</button>
                        <button class="btn btn-secondary" id="allPathsBtn">üó∫Ô∏è Tous les chemins</button>
                        <div id="pathNavigationControls" style="display: none; margin-top: 10px; text-align: center;">
                            <button id="prevPathBtn" class="btn btn-secondary" style="width: auto;">‚¨ÖÔ∏è </button>
                            <span id="pathCounter" style="margin: 0 10px;">1 / N</span>
                            <button id="nextPathBtn" class="btn btn-secondary" style="width: auto;"> ‚û°Ô∏è</button>
                        </div>                        
                    </div>

                    <div class="form-group" style="margin-top: 15px;">
                        <label>Reinitialisation</label>
                        <button id="resetGraphBtn" class="btn btn-secondary">üîÑ Nettoyer le graphe</button>
                        <button id="deleteGraphBtn" class="btn btn-secondary">üîÑ Supprimer le graphe</button>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Zone principale - Graphe -->
        <main class="main-area">
            <div class="graph-container" id="graphContainer">
                <div class="graph-overlay" id="graphOverlay">
                    üìä Graphe: 0 n≈ìuds ‚Ä¢ 0 ar√™tes ‚Ä¢ <span id="zoom">Zoom : 100%</span>
                </div>
            </div>
        </main>

        <!-- Toolbar droite - Analyses -->
        <aside class="toolbar">
            <!-- Informations sur le n≈ìud s√©lectionn√© -->
            <div class="panel-content" id="selectedNodeInfo">
                <div class="panel-header">‚ÑπÔ∏è N≈ìud s√©lectionn√©</div>
                <div class="panel-content">
                    <strong>Cliquez sur un noeud</strong><br>
                </div>
            </div>

            <!-- Statistiques -->
            <div class="panel" id="stats-panel">
                <div class="panel-header">üìà Statistiques</div>
                <div class="panel-content" id="statsPanelContent">
                    <div class="stats-item">
                        <span>Triplets totaux:</span>
                        <span class="stats-value">TODO</span>
                    </div>
                    <div class="stats-item">
                        <span>N≈ìuds uniques:</span>
                        <span class="stats-value">TODO</span>
                    </div>
                    <div class="stats-item">
                        <span>Pr√©dicats uniques:</span>
                        <span class="stats-value">TODO</span>
                    </div>
                    <div class="stats-item">
                        <span>N≈ìuds isol√©s:</span>
                        <span class="stats-value">TODO</span>
                    </div>

                    <div style="margin-top: 15px;">
                        <label style="font-size: 13px; font-weight: 600;">Distribution par type:</label>
                        <div class="stats-item">
                            <span>foaf:Person</span>
                            <span class="stats-value">TODO</span>
                        </div>
                        <div class="stats-item">
                            <span>dbo:Organization</span>
                            <span class="stats-value">TODO</span>
                        </div>
                        <div class="stats-item">
                            <span>dbo:Place</span>
                            <span class="stats-value">TODO</span>
                        </div>
                        <div class="stats-item">
                            <span>skos:Concept</span>
                            <span class="stats-value">TODO</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Apparence -->
            <div class="panel">
                <div class="panel-header">üé® Apparence</div>
                <div class="panel-content">
                    <div class="form-group">
                        <label>Couleur des n≈ìuds</label>
                        <select class="form-control" id="nodeColorModeSelect">
                            <option>Par type RDF</option>
                            <option>Par degr√© entrant</option>
                            <option>Par degr√© sortant</option>
                            <option>Par degr√© total</option>
                        </select>                        
                    </div>
                    
                    <div class="color-legend" id="colorNodeLegend">     
                        <div class="legend-item"> </div>
                    </div>

                    <div class="form-group">
                        <label for="nodeSizeModeSelect"><br>Taille des n≈ìuds</label>
                        <select class="form-control" id="nodeSizeModeSelect">
                            <option>Par degr√© entrant</option>
                            <option>Par degr√© sortant</option>
                            <option>Par degr√© total</option>
                        </select>
                    </div>            
                    
                    <div class="form-group">
                        <label for="edgeColorModeSelect">Couleur des ar√™tes</label>
                        <select class="form-control" id="edgeColorModeSelect">
                            <option>Par pr√©dicats</option>
                            <option>Pas de coloration</option>
                        </select>
                    </div>       
                    
                    <div class="color-legend" id="colorEdgeLegend">     
                        <div class="legend-item"> </div>
                    </div>
                    
                </div>
            </div>

            <!-- Aper√ßu mini-graphe -->
            <div class="panel">
                <div class="panel-header">üó∫Ô∏è Vue d'ensemble</div>
                <div class="panel-content">
                    <div class="node-preview">
                        <svg id="miniMapSvg" width="100%" height="100%"></svg>
                    </div>
                </div>
            </div>
        </aside>
    </div>

    <script src="libs/d3.v7.min.js"></script>
    <script src="libs/n3.min.js"></script>  
    <script src="script.js"></script>
</body>

</html>
